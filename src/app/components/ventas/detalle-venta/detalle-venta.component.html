<app-sidebar></app-sidebar>


<!-- Page title-->
<div class="border-bottom pt-5 mt-2 mb-5">
  <h1 class="mt-2 mt-md-4 mb-3 pt-5">Ventas</h1>
  <div class="d-flex flex-wrap flex-md-nowrap justify-content-between">
    <p class="text-muted">Este m√≥dulo lista todas las ventas de la tienda.</p>

  </div>
</div>

<div class="card box-shadow-sm">


  <div class="card-body">

    <div class="row mb-3">
      <div class="col-12 mb-4">
        <div class="card card-body py-3 box-shadow">
          <div class="row">
            <div class="col-lg-6">
              <table class="table mb-0">
                <tbody>
                  <tr *ngIf="orden.cliente">
                    <th class="border-0 py-2 pl-0">Cliente:</th>
                    <td class="border-0 py-2 px-0 text-muted">
                      {{ orden.cliente.nombres}} {{ orden.cliente.apellidos}}
                    </td>
                  </tr>
                  <tr>
                    <th class="border-0 py-2 pl-0">Order No:</th>
                    <td class="border-0 py-2 px-0 text-muted">
                      {{ id.toUpperCase() }}
                    </td>
                  </tr>
                  <tr>
                    <th class="border-0 py-2 pl-0">Envio:</th>
                    <td class="border-0 py-2 px-0 text-muted">
                      {{ orden.envio_titulo }}
                    </td>
                  </tr>
                  <tr>
                    <th class="border-0 py-2 pl-0">Fecha realizada:</th>
                    <td class="border-0 py-2 px-0 text-muted">
                      {{ orden.createdAt | date }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-lg-6">
              <table class="table mb-0">
                <tbody>
                  <tr>
                    <th class="border-0 py-2 pl-0">Precio de envio:</th>
                    <td class="border-0 py-2 px-0 text-muted">
                      ${{ orden.envio_precio }}
                    </td>
                  </tr>
                  <tr>
                    <th class="border-0 py-2 pl-0">Venta:</th>
                    <td class="border-0 py-2 px-0 text-muted">
                      {{ orden.nventa }}
                    </td>
                  </tr>
                  <tr>
                    <th class="border-0 py-2 pl-0">Transaccion:</th>
                    <td class="border-0 py-2 px-0 text-muted">
                      {{ orden.transaccion }}
                    </td>
                  </tr>
                  <tr>
                    <th class="border-0 py-2 pl-0">Estado:</th>
                    <td class="border-0 py-2 px-0 text-muted">
                      {{ orden.estado }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 mb-3" *ngIf="orden.direccion">
        <div class="card mb-2">
          <div class="card-body">
            <div class="row mb-0">
              <div class="col-md-3 col-sm-4 mb-sm-0">
                <h3 class="mb-2 fs-lg">
                  {{ orden.direccion.destinatario }}
                </h3>
                <span class="d-block fs-sm text-muted"
                  >Zip: {{ orden.direccion.zip }}</span
                >
                <!-- <a class="badge badge-primary" *ngIf="orden.direccion.principal">Direccion de Envio</a> -->
                <!-- <a class="badge badge-secondary" style="cursor: pointer;" *ngIf="!orden.direccion.principal" (click)="establecer_principal(orden.direccion._id)">Establecer principal</a> -->
              </div>
              <div class="col">
                <p class="mb-3">{{ orden.direccion.direccion }}</p>
                <p class="mb-3">
                  {{ orden.direccion.pais }} -
                  <span>{{ orden.direccion.region }}</span> -
                  <span>{{ orden.direccion.provincia }}</span> -
                  <span>{{ orden.direccion.distrito }}</span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card border-bottom">
      <div class="card-header accordion-heading py-1">
        <a
          href="#order-1"
          class="d-flex flex-wrap justify-content-between py-3"
          data-toggle="collapse"
          aria-expanded="true"
        >
          <span class="pr-2"># {{ id.toUpperCase() }}</span>
          <span class="font-size-sm text-muted text-nowrap px-2">
            <i class="cxi-clock font-size-base align-middle mt-n1 mr-1"></i>
            {{ orden.createdAt | date }}
          </span>
          <span class="badge badge-info">{{ orden.estado }}</span>
          <span class="text-dark pl-1">${{ orden.subtotal }}</span>
        </a>
      </div>
      <div id="order-1" class="collapse show" data-parent="#orders">
        <div class="bg-secondary rounded mb-4">
          <div class="table-responsive">
            <table class="table mb-0">
              <tbody>
                <tr *ngFor="let item of d_ordenes">
                  <td class="border-top-0">
                    <div class="media pl-2 py-2">
                      <a href="shop-single.html" style="min-width: 80px">
                        <img
                          [src]="
                            url + 'obtener_portada/' + item.producto.portada
                          "
                          width="80"
                          alt="Product thumb"
                        />
                      </a>
                      <div class="media-body pl-3">
                        <h3 class="font-size-sm mb-3">
                          <a
                            href="shop-single.html"
                            class="nav-link font-weight-bold"
                            >{{ item.producto.titulo }}</a
                          >
                        </h3>
                        <ul class="list-unstyled font-size-xs mt-n2 mb-2">
                          <li class="mb-0">
                            <span class="text-muted"
                              >{{ item.producto.titulo_variedad }}:</span
                            >
                            {{ item.variedad }}
                          </li>
                        </ul>


                      </div>
                    </div>
                  </td>
                  <td class="border-top-0">
                    <div class="py-2">
                      <div class="font-size-xs text-muted mb-1">Price:</div>
                      <div class="font-size-sm text-dark">
                        ${{ item.producto.precio }}
                      </div>
                    </div>
                  </td>
                  <td class="border-top-0">
                    <div class="py-2">
                      <div class="font-size-xs text-muted mb-1">
                        Quantity:
                      </div>
                      <div class="font-size-sm text-dark">
                        {{ item.cantidad }}
                      </div>
                    </div>
                  </td>
                  <td class="border-top-0">
                    <div class="py-2 pr-3 text-right">
                      <div class="font-size-xs text-muted mb-1">
                        Subtotal:
                      </div>
                      <div class="font-size-sm font-weight-bold text-dark">
                        ${{ item.subtotal }}
                      </div>
                    </div>
                  </td>
                </tr>

                <tr>
                  <td>
                    <div class="py-2 pl-2">
                      <span class="font-size-xs text-muted"></span>
                      <span class="font-size-sm text-dark"></span>
                    </div>
                  </td>
                  <td>
                    <div class="py-2">
                      <span class="font-size-xs text-muted">Envio: </span>
                      <span class="font-size-sm text-dark"
                        >${{ orden.envio_precio }}</span
                      >
                    </div>
                  </td>
                  <td>
                    <div class="py-2">
                      <span class="font-size-xs text-muted"></span>
                      <span class="font-size-sm text-dark"></span>
                    </div>
                  </td>
                  <td>
                    <div class="py-2 pr-3 text-right">
                      <span class="font-size-xs text-muted">Total: </span>
                      <span class="font-size-sm font-weight-bold text-dark"
                        >${{ orden.subtotal }}</span
                      >
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>


  </div>
  <div class="card-footer">

  </div>
</div>
